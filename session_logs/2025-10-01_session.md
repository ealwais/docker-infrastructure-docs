# Session Log - October 1, 2025

## Summary
Major updates to sports channels, folder cleanup, and system optimization.

## 1. Sports Channels - Fixed and Added

### Channels Fixed
- **Channel 602**: Changed from "Fight Network ESPNU" to "ESPN"
  - URL: http://pvserver.link:8080/iufuhqfi/ac122DD5aa/58399

- **Channel 604**: Changed from "MLB Strike One MLB" to "ESPN News"
  - URL: http://pvserver.link:8080/iufuhqfi/ac122DD5aa/58400

- **Channel 607**: Changed from "ESPN 3 ESPN" to "SEC Network"
  - URL: http://pvserver.link:8080/iufuhqfi/ac122DD5aa/58404

### New Channels Added
- **Channel 603**: ESPN2
  - URL: http://pvserver.link:8080/iufuhqfi/ac122DD5aa/58390

- **Channel 608**: ACC Network
  - URL: http://pvserver.link:8080/iufuhqfi/ac122DD5aa/58177

- **Channel 636**: Big Ten Network
  - URL: http://pvserver.link:8080/iufuhqfi/ac122DD5aa/58220

- **Channel 637**: NBA TV
  - URL: http://pvserver.link:8080/iufuhqfi/ac122DD5aa/58737

- **Channel 638**: MLB Network
  - URL: http://pvserver.link:8080/iufuhqfi/ac122DD5aa/58647

- **Channel 639**: NFL Network
  - URL: http://pvserver.link:8080/iufuhqfi/ac122DD5aa/58808

- **Channel 640**: NFL RedZone
  - URL: http://pvserver.link:8080/iufuhqfi/ac122DD5aa/58812

### Channel Count
- Before: 76 channels
- After: 82 channels (+6 new sports channels)

## 2. Channel Searches Performed

### Team/Game Searches
- **Yankees**: Found MLB New York Yankees (xui-id 499186)
- **Red Sox**: Found MLB Boston Red Sox (xui-id 499171)
- **Dallas Stars**: Found NHL games vs Colorado (xui-ids 497416, 497418)
- **Pittsburgh Penguins**: Not available in playlist
- **San Antonio Spurs**: Found FOX Sports San Antonio (xui-id 496172) - 0 bytes (not working)
- **WNBA**: No content available
- **NHL Preseason (Oct 1)**: Games not available in provider playlist

## 3. Comedy Central Update
- **Channel 140**: Comedy Central
  - Changed from USA Comedy Central (xui-id 58311) to Latin Comedy Central (xui-id 87953)
  - Note: Both URLs return 0 bytes - Comedy Central not available from provider

## 4. Folder Cleanup

### /mnt/docker/xteve
**Before:** 130+ files
**After:** 15 files

**Files Removed:**
- 115+ files including:
  - All backup files (*.backup, *.backup_*, good.csv.backup_*)
  - Test scripts (test_*.sh, test_*.py)
  - Fix scripts (fix_*.py, fix_*.sh - one-time use)
  - Analysis scripts (analyze_*.py, audit_*.py, check_*.py, verify_*.py)
  - Old playlists (merged.m3u, playlist_test.m3u, etc.)
  - Reports/logs (*.txt, *.csv, wget-log*)
  - Archive files (*.tar.gz)
  - Old Docker configs (docker-compose.yml.old.backup, Dockerfile.bak)

**Files Kept:**
- create_xteve_m3u.py (main M3U generator)
- epg_update_production.sh (production automation)
- health_check.sh, monitor_epg_health.sh, streaming-health-check.sh, streaming-verify.sh (monitoring)
- Dockerfile, Dockerfile.arm64 (container configs)
- authentication.json, settings.json, pms.json, xepg.json, urls.json (configs)
- playlist_iufuhqfi.m3u, playlist_austin_cable_clean.m3u (active playlists)

### /mnt/television.shows/convert
**Before:** 11 files
**After:** 3 files

**Files Removed:**
- All backup versions (convert.videos.backup.*.py)
- Debug/test versions (debug, fixed, original, safe, test_script.py)
- fix_hevc.py (HEVC not used per user preference)

**Files Kept:**
- convert.videos.py (main active script)
- conversion.log (active log)
- conversion_monitor.log (monitor log)

## 5. Documentation Created

### /mnt/docker/documentation/xteve_scripts/
- **cleanup_summary.md** - Full cleanup details for xTeve folder
- **active_scripts.md** - Documentation of all active xTeve scripts and configs

### /mnt/docker/documentation/convert_scripts/
- **cleanup_summary.md** - Full cleanup details for convert folder
- **active_scripts.md** - Documentation of convert.videos.py script

## 6. System Updates

### Buffer Settings
- Location: `/mnt/docker/xteve/config/settings.json`
- Current settings (optimized for 2-connection provider limit):
  - buffer.size.kb: 4096
  - buffer.timeout: 2000ms

### Plex DVR
- User removed and re-added DVR to pick up new sports channels
- Total channels now: 82
- EPG last updated: Oct 1, 20:18

### xTeve Container
- Restarted multiple times during session
- Container name: xteve-streaming
- Status: Healthy

## 7. Files Modified

### /mnt/docker/xteve/data/good.csv
- Updated 3 existing sports channels with correct names/URLs
- Added 6 new sports channel entries
- Updated Comedy Central URL (though channel still not working)
- Total entries: 82 channels

### /mnt/docker/xteve/data/xteve.m3u
- Regenerated multiple times using create_xteve_m3u.py
- Current version: 82 channels
- Backup created: xteve.m3u.backup_20251001_204557

## 8. Known Issues

### Non-Working Channels
- All Comedy Central variants return 0 bytes (not available from provider)
- FOX Sports San Antonio returns 0 bytes
- NHL preseason games (Oct 1) not in provider playlist
- WNBA content not available

### Provider Limitations
- 2 simultaneous connection limit
- Some channels/sports not available
- Playlist size: ~185,000 lines, 92,000+ channels

## 9. Scripts Created During Session

### /tmp/get_sports_xuiids.sh
- Script to extract sports channel xui-ids from playlist
- Lists ESPN, ESPN2, ESPN News, SEC, ACC, Big Ten, NBA, MLB, NFL, NFL RedZone

### /tmp/find_sports_channels.sh
- Searches for sports channels in playlist by name

### /tmp/verify_channels.sh
- Verifies channel mappings in good.csv
- Shows name and URL for specified channels

### /tmp/test_channels.sh
- Tests channel URLs for availability
- Reports working/broken/timeout status
- Counts 0-byte responses

## 10. Key Commands Used

### Channel Management
```bash
# Regenerate M3U
python3 /mnt/docker/xteve/create_xteve_m3u.py

# Restart xTeve
docker restart xteve-streaming

# Test channel URL
timeout 3 curl -s "URL" | wc -c
```

### File Searches
```bash
# Search playlist
grep -i "PATTERN" /mnt/docker/xteve/playlist_iufuhqfi.m3u

# Find channel in good.csv
grep "CHANNEL" /mnt/docker/xteve/data/good.csv
```

## 11. Next Steps / Recommendations

1. Monitor new sports channels in Plex to ensure they're working
2. Replace Comedy Central with a different channel or remove if not available
3. Check provider for NHL games when regular season starts
4. Consider scheduling regular playlist downloads to get updated game channels
5. Keep documentation updated when making future changes

## 12. Important File Locations

- **Master Channel Database**: `/mnt/docker/xteve/data/good.csv`
- **Generated M3U**: `/mnt/docker/xteve/data/xteve.m3u`
- **Provider Playlist**: `/mnt/docker/xteve/playlist_iufuhqfi.m3u`
- **EPG Data**: `/mnt/docker/xteve/data/sd.xml`
- **xTeve Config**: `/mnt/docker/xteve/config/settings.json`
- **Documentation**: `/mnt/docker/documentation/`

## Session Statistics
- Channels added: 6
- Channels fixed: 3
- Files cleaned up: 123
- Documentation files created: 5
- xTeve restarts: 4+
- Total channel count: 82
